FROM mcr.microsoft.com/dotnet/sdk:10.0

WORKDIR /workspace

# Copy project files first for better layer caching
COPY Api.csproj ./
RUN dotnet restore

# Copy the rest of the source
COPY . ./

ENV ASPNETCORE_URLS=http://0.0.0.0:8080
EXPOSE 8080

CMD ["dotnet", "run", "--no-launch-profile"]
